## 父组件向子组件传值

1. 子组件设置props对象，对象内的属性即接受父组件传值的入口目标
2. 父组件，调用子组件时，通过动态绑定的方式，进行传值

```javascript
// 父组件
// 循环渲染数组，注意要绑定key值
// :title="item.googs_name"  向子组件传值
<Goods v-for="item in list" :key="item.id" :title="item.goods_name" :pic="item.goods_img"></Goods>

// 子组件
<img :src="pic" alt="" /> // 注意，标签属性动态绑定要用: 不能用{{}}
<h6 class="goods-title">{{ title }}</h6>

props: {
    title: {
      default: '', // 默认值为空
      type: String // 父组件传值的类型为字符串类型
    },
    pic: {
      default: '',
      type: String
    }
  }
```



> 注意，父向子传值时，子组件中的props对象内的prop是只读的，不能进行修改，即只能使用v-bind进行绑定，而不能使用v-model进行双向绑定



### 关于封装子组件中props两种方法的分析

- 将子组件中的props封装为一个对象

```javascript
props: {
  goods: {
    default: {},
    type: Object
  }
}
```

- 将子组件中的props封装为拆解一个对象的所有属性

```javascript
props: {
  title: {
    default: '',
    type: String
  },
  pic: {
    default: '',
    type: String
  }
}
```

> 两种方法的比较：使用方法二进行封装，代码的复用性更强；使用方法一进行封装，当多个页面需要用到该子组件时，子组件调用goods对象中的属性，就不知道使用什么名称了，因此一般建议使用方法二进行封装

![image-20220305105035212](C:\Users\烧鸡公\AppData\Roaming\Typora\typora-user-images\image-20220305105035212.png)



## 子向父传值

1. 通过自定义事件实现，子组件中，使用this.$emit( '自定义事件名' ,  {自定义事件形参} )方法自定义事件
2. 父组件绑定自定义事件，@state-change="getNewState"，其中state-change是在子组件中自定义的事件，getNewState为父组件中进行处理的方法，需在methods中实现。

> ```javascript
> methods: {
>   getNewState(e) { // e为子组件通过 this.$emit()传递到父组件中的数据
>     
>   }
> }
> ```



## 兄弟之间传值（当存在组件的多层嵌套时，为了避免多层的子传父，可以采用该方案进行处理）

> 采用 eventBus 方案解决，发送数据方采用：$emit('自定义事件名', 参数)，接收数据方采用：$on('自定义事件名', 处理方法)        
>
> **注意：**两者调用方法时的自定义事件名 必须一致
>
> 需要在components目录下新建一个eventBus.js文件，并在该文件中，完成下列操作
>
> 发送方和接收方都需要导入该文件
>
> ```javascript
> import Vue from 'Vue'
> export default new Vue()
> ```

